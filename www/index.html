<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="msapplication-tap-highlight" content="no" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
        <link rel="stylesheet" type="text/css" href="css/index.css" />
        <title>KiwiApp</title>
        <style>
            @font-face {
                font-family:Gafata;
                src: url(font/gafata.ttf);
            }
            body
            {
                font-family:'Gafata';
                background-color:#2a2b2a;
            }
            .app
            {
                display:none;
            }
            #img-splash
            {
                width:100%;
                height:100%;
            }
            footer {
                position: fixed;
                bottom: 0;
                width: 100%;
                height: 40px;
                background-color: #2a2b2a;
                display:none;
            }
            footer ul
            {
                list-style: none;
                width: 100%;
                height: 45px;
                margin: 0 auto;
                padding: 0;
                display: block;
                position: relative;
                text-align: center;
            }

            footer ul li
            {
                display: inline-block;
                height: 39px;
                width: 76px;
            }
            footer ul li img
            {
                width:100%;
                height:100%;
            }
            header
            {
                background-color:#2a2b2a;
                width:100%;
                display:none;
                height:60px;
                position:fixed;
                z-index:2;
            }
            header img
            {
                width:100%;
            }
            header #logo
            {
                width:33%;
                margin:0 auto;
                padding-top:5px;
            }

            .banners
            {
                width:100%;
                height:calc(100%-60px);
                z-index:0;
                background-color:#2a2b2a;
            }
            body
            {
                background-color:#2a2b2a;
            }
            #cerrar-menu
            {
                color:white;
                font-family: 'Gafata';
                font-weight: bolder;
                font-size:16px;
            }
            #search
            {
                border-radius: 1em;
                border: 1px solid #2a2b2a;
                background-color:#2a2b2a;
                background-clip: padding-box;
                width:100%;
                margin-top:-90px;
                z-index:1;
            }
            #search input
            {
                color:white;
                width: 100%;
                border-radius: 1em;
                border: 1px solid #2a2b2a;
                background-color:#2a2b2a;
                background-image: url(img/iconos/icon-search-black.png);
                background-size: 16px 16px;
                background-repeat: no-repeat;
                outline:none;
            }
            #overlay
            {
                display:none;
                width: 100%;
                height: 1000%;
                background-color: #2a2b2a;
                opacity: 0.90;
                z-index: 0;
                position: absolute;
                top: 0;
                left: 0;
            }
            #cerrar
            {
                color:white;
                font-size:24px;
                font-weight: bold;
                position:absolute;
                z-index: 1;
                right: 0;
                bottom: 0;
                display:none;
            }
            #categorias
            {
                list-style: none;
                color:white;
                margin-top:110px;
                padding: 0;

            }
            #categorias li
            {
                display: inline-block;
                float: left;
                width: 50%;
            }
            header
            {
                -webkit-transform: translate3d(0,0,0);
            }
            header #logo{ 
                margin-top: 15px;
            }
            body{
                background-color:#2a2b2a !important; 
            }
            .banners img
            {
                width:100%;
                height:100%;
            }
        </style>
    </head>
    <body>
        <div id="splashscreen">
            <img src="img/splash.png" alt="" id="img-splash" />
        </div>
        <header>
            <div id="logo">
                <img src="img/iconos/logo.png" alt="" />
            </div>
            <div id="search">
                <input type="search" name="password" id="buscar"  value="" />
            </div>
        </header>
        <div class="app">
            <div class="banners">
                <img src="img/banners/collares_ban.png" align="middle" />
            </div>
        </div>
        <footer>
            <ul id="menu">
                <li id="producto">
                    <img src="img/iconos/producto.png" />
                </li>
                <li id="tiendas">
                    <img src="img/iconos/tiendas.png" />
                </li>
                <li id="carrito">
                    <img src="img/iconos/carrito.png" />
                </li>
                <li id="perfil">
                    <img src="img/iconos/perfil.png" />
                </li>
            </ul>
        </footer>
        <div id="overlay"></div>
        <div id="cerrar">Regresar</div>
        <script>
            setTimeout(function () {
                var splash = document.querySelector('#splashscreen');
                splash.style.visibility = "hidden";
                splash.style.display = "none";
                document.querySelector('.app').style.display = 'block';
                document.querySelector('header').style.display = 'block';
                document.querySelector('footer').style.display = 'block';
            }, 4000);
        </script>
        <script type="text/javascript" src="cordova.js"></script>
        <script type="text/javascript" src="js/libs/jquery/jquery.js"></script>
        <script src="js/libs/loader/jquery.loader.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
        <script>

            document.getElementsByClassName('banners')[0].addEventListener('touchstart', handleSwipeBanners, false);
            document.getElementsByClassName('banners')[0].addEventListener('touchmove', handleSwipeBannersFin, false);


            var xDown = null;
            var yDown = null;
            var xSwipe = null;
            var ySwipe = null;

            var imagenes = new Array();
            imagenes[0] = "img/banners/collares_ban.png";
            imagenes[1] = "img/banners/bolsas_ban.png";
            imagenes[2] = "img/banners/pashmina_ban.png";
            var index = 0;


            function handleSwipeBanners(evt) {
                xSwipe = evt.touches[0].clientX;
                ySwipe = evt.touches[0].clientY;
            }

            function handleSwipeBannersFin(evt) {
                if (!xSwipe || !ySwipe) {
                    return;
                }

                var xUp = evt.touches[0].clientX;
                var yUp = evt.touches[0].clientY;

                var xDiff = xSwipe - xUp;
                var yDiff = ySwipe - yUp;

                if (Math.abs(xDiff) > Math.abs(yDiff)) {
                    if (xDiff > 0) {
                        index--;
                        if (index < 0)
                        {
                            index = 2;
                        }
                        $(".banners img").fadeOut('fast').fadeIn('fast').attr('src', imagenes[index]);
                    } else {
                        index++;
                        if (index > 2)
                        {
                            index = 0;
                        }
                        $(".banners img").fadeOut('fast').fadeIn('fast').attr('src', imagenes[index]);
                    }
                }
                xSwipe = null;
                ySwipe = null;
            }


            setInterval(function () {
                index++;
                if (index > 2)
                {
                    index = 0;
                }
                $(".banners img").fadeOut('fast').fadeIn('fast').attr('src', imagenes[index]);
            }, 12000);

        </script>

        <script>
            $(document).ready(function ()
            {
                $(".en-productos").scroll(function () {
                    $("#cerrar");
                });
            });

            var xOverlay = null;
            var yOverlay = null;
            var total = 0;
            var offset = 0;
            $("#cerrar").on('click', function (e)
            {
                $("#search").css('margin-top', '-90px');
                $("#overlay").hide();
                $(this).hide();
            });
            $("#perfil").on('click', function (e)
            {
                e.preventDefault();
                $("#menu").css('margin-top', '60px');
                $("footer").addClass('full').animate({'height': '100%', 'margin-top': ($(window).width() - 60) + 'px'}, 750)
                $("#cerrar").show();
                return false;
            });

            $("#producto").on('click', function (e)
            {
                e.preventDefault();
                $("#search").animate({'margin-top': '2%'}, 500, function () {
                    $("#search").focus();
                });
                $.loader({
                    className: "blue-with-image-2",
                    content: ''
                });

                $("#overlay").addClass('en-productos').show();

                $.ajax({
                    'url': 'http://localhost/kwshop/index.php?/app/categorias',
                    'dataType': 'json',
                    'type': 'POST',
                }).done(function (html)
                {
                    $("#overlay").css('height', ((html.total / 2) * 158) + 'px').html(html.html);

                    $("#cerrar").show();

                    $.loader('close');
                });
                return false;
            })
        </script>
    </body>
</html>
